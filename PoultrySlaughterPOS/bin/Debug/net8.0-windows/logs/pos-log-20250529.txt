2025-05-29 14:51:07.239 +03:00 [INF] Starting Poultry Slaughter POS application with fixed execution strategy configuration...
2025-05-29 14:51:07.983 +03:00 [INF] Database configuration - UseExplicitTransactions: true, EnableRetryOnFailure: false
2025-05-29 14:51:08.045 +03:00 [INF] Service configuration completed successfully with 98 services registered (execution strategy fixed)
2025-05-29 14:51:08.127 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 14:51:08.135 +03:00 [INF] Hosting environment: Production
2025-05-29 14:51:08.135 +03:00 [INF] Content root path: C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\bin\Debug\net8.0-windows
2025-05-29 14:51:08.136 +03:00 [INF] Application host started successfully with fixed database configuration
2025-05-29 14:51:08.402 +03:00 [INF] Starting database initialization for SQL Server...
2025-05-29 14:51:10.206 +03:00 [INF] Verifying SQL Server instance with connection: Server=.\posserver;Database=chicken;Trusted_Connection=True;MultipleActiveResultSets=true;TrustServerCertificate=True
2025-05-29 14:51:10.947 +03:00 [INF] Testing SQL Server connection...
2025-05-29 14:51:11.179 +03:00 [INF] SQL Server connection successful.
2025-05-29 14:51:11.351 +03:00 [INF] Database 'chicken' created/verified successfully.
2025-05-29 14:51:11.834 +03:00 [INF] Database schema verification completed:
2025-05-29 14:51:11.834 +03:00 [INF] - TRUCKS: 3 records
2025-05-29 14:51:11.834 +03:00 [INF] - CUSTOMERS: 3 records
2025-05-29 14:51:11.834 +03:00 [INF] - TRUCK_LOADS: 3 records
2025-05-29 14:51:11.834 +03:00 [INF] - INVOICES: 0 records
2025-05-29 14:51:11.834 +03:00 [INF] - PAYMENTS: 0 records
2025-05-29 14:51:11.834 +03:00 [INF] - DAILY_RECONCILIATION: 0 records
2025-05-29 14:51:11.834 +03:00 [INF] - AUDIT_LOGS: 3 records
2025-05-29 14:51:11.834 +03:00 [INF] Database initialization completed successfully.
2025-05-29 14:51:11.834 +03:00 [INF] Database initialization completed successfully
2025-05-29 14:51:12.743 +03:00 [INF] MainWindow initialized successfully
2025-05-29 14:51:13.223 +03:00 [INF] MainWindow loaded, starting initialization
2025-05-29 14:51:13.435 +03:00 [INF] Poultry Slaughter POS application started successfully with resolved execution strategy
2025-05-29 14:51:13.501 +03:00 [INF] Dashboard initialized - Trucks: 3, Customers: 3, Today's Invoices: 0
2025-05-29 14:51:13.502 +03:00 [INF] MainWindow initialization completed successfully
2025-05-29 14:51:18.276 +03:00 [INF] MainWindow closing, performing cleanup
2025-05-29 14:51:18.277 +03:00 [INF] MainWindow cleanup completed
2025-05-29 14:51:18.339 +03:00 [INF] Shutting down Poultry Slaughter POS application...
2025-05-29 14:51:18.347 +03:00 [INF] Application is shutting down...
2025-05-29 14:51:18.354 +03:00 [INF] Application host stopped successfully
2025-05-29 14:51:18.355 +03:00 [INF] Poultry Slaughter POS application shutdown completed
2025-05-29 15:49:12.935 +03:00 [INF] Starting Poultry Slaughter POS application with fixed execution strategy configuration...
2025-05-29 15:49:13.345 +03:00 [INF] Database configuration - UseExplicitTransactions: true, EnableRetryOnFailure: false
2025-05-29 15:49:13.435 +03:00 [INF] Service configuration completed successfully with 98 services registered (execution strategy fixed)
2025-05-29 15:49:13.541 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 15:49:13.548 +03:00 [INF] Hosting environment: Production
2025-05-29 15:49:13.548 +03:00 [INF] Content root path: C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\bin\Debug\net8.0-windows
2025-05-29 15:49:13.549 +03:00 [INF] Application host started successfully with fixed database configuration
2025-05-29 15:49:13.744 +03:00 [INF] Starting database initialization for SQL Server...
2025-05-29 15:49:17.405 +03:00 [INF] Verifying SQL Server instance with connection: Server=.\posserver;Database=chicken;Trusted_Connection=True;MultipleActiveResultSets=true;TrustServerCertificate=True
2025-05-29 15:49:18.463 +03:00 [INF] Testing SQL Server connection...
2025-05-29 15:49:18.718 +03:00 [INF] SQL Server connection successful.
2025-05-29 15:49:19.086 +03:00 [INF] Database 'chicken' created/verified successfully.
2025-05-29 15:49:20.086 +03:00 [INF] Database schema verification completed:
2025-05-29 15:49:20.086 +03:00 [INF] - TRUCKS: 3 records
2025-05-29 15:49:20.086 +03:00 [INF] - CUSTOMERS: 3 records
2025-05-29 15:49:20.087 +03:00 [INF] - TRUCK_LOADS: 3 records
2025-05-29 15:49:20.087 +03:00 [INF] - INVOICES: 0 records
2025-05-29 15:49:20.087 +03:00 [INF] - PAYMENTS: 0 records
2025-05-29 15:49:20.087 +03:00 [INF] - DAILY_RECONCILIATION: 0 records
2025-05-29 15:49:20.087 +03:00 [INF] - AUDIT_LOGS: 3 records
2025-05-29 15:49:20.087 +03:00 [INF] Database initialization completed successfully.
2025-05-29 15:49:20.088 +03:00 [INF] Database initialization completed successfully
2025-05-29 15:49:20.909 +03:00 [INF] MainWindow initialized successfully
2025-05-29 15:49:21.375 +03:00 [INF] MainWindow loaded, starting initialization
2025-05-29 15:49:21.624 +03:00 [INF] Poultry Slaughter POS application started successfully with resolved execution strategy
2025-05-29 15:49:21.685 +03:00 [INF] Dashboard initialized - Trucks: 3, Customers: 3, Today's Invoices: 0
2025-05-29 15:49:21.686 +03:00 [INF] MainWindow initialization completed successfully
2025-05-29 15:49:24.951 +03:00 [INF] Navigating to page: TruckLoading
2025-05-29 15:49:24.964 +03:00 [INF] SQL Server retry strategy disabled to support explicit transactions
2025-05-29 15:49:24.993 +03:00 [INF] TruckLoadingViewModel initialized with enhanced save functionality and debugging capabilities
2025-05-29 15:49:25.120 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:25.125 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:25.771 +03:00 [INF] TruckLoadingView loaded, initializing ViewModel with save functionality
2025-05-29 15:49:25.772 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:25.772 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:26.293 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:26.464 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:26.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:26.855 +03:00 [INF] Truck loading data loaded successfully in 1083ms
2025-05-29 15:49:26.857 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:26.857 +03:00 [INF] Truck loading page loaded successfully
2025-05-29 15:49:26.858 +03:00 [INF] Successfully navigated to page: TruckLoading
2025-05-29 15:49:27.034 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:27.038 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:27.118 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:27.375 +03:00 [INF] Truck loading data loaded successfully in 1083ms
2025-05-29 15:49:27.406 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:27.438 +03:00 [INF] TruckLoadingView initialization completed successfully in 1666ms
2025-05-29 15:49:35.624 +03:00 [INF] Navigating to page: POSSales
2025-05-29 15:49:35.630 +03:00 [INF] Successfully navigated to page: POSSales
2025-05-29 15:49:37.593 +03:00 [INF] Navigating to page: TruckLoading
2025-05-29 15:49:37.594 +03:00 [INF] TruckLoadingViewModel initialized with enhanced save functionality and debugging capabilities
2025-05-29 15:49:37.615 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:37.615 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:37.749 +03:00 [INF] TruckLoadingView loaded, initializing ViewModel with save functionality
2025-05-29 15:49:37.749 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:37.749 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:38.240 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:38.257 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:38.272 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:38.286 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:38.437 +03:00 [INF] Truck loading data loaded successfully in 688ms
2025-05-29 15:49:38.437 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:38.438 +03:00 [INF] Truck loading page loaded successfully
2025-05-29 15:49:38.438 +03:00 [INF] Successfully navigated to page: TruckLoading
2025-05-29 15:49:38.443 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:38.510 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:38.625 +03:00 [INF] Truck loading data loaded successfully in 688ms
2025-05-29 15:49:38.625 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:38.626 +03:00 [INF] TruckLoadingView initialization completed successfully in 877ms
2025-05-29 15:49:39.192 +03:00 [INF] Navigating to page: POSSales
2025-05-29 15:49:39.195 +03:00 [INF] Successfully navigated to page: POSSales
2025-05-29 15:49:41.079 +03:00 [INF] Navigating to page: CustomerAccounts
2025-05-29 15:49:41.079 +03:00 [INF] Successfully navigated to page: CustomerAccounts
2025-05-29 15:49:42.269 +03:00 [INF] Navigating to page: TransactionHistory
2025-05-29 15:49:42.270 +03:00 [INF] Successfully navigated to page: TransactionHistory
2025-05-29 15:49:44.305 +03:00 [INF] Navigating to page: Reports
2025-05-29 15:49:44.306 +03:00 [INF] Successfully navigated to page: Reports
2025-05-29 15:49:45.776 +03:00 [INF] Navigating to page: TransactionHistory
2025-05-29 15:49:45.777 +03:00 [INF] Successfully navigated to page: TransactionHistory
2025-05-29 15:49:48.097 +03:00 [INF] Navigating to page: TruckLoading
2025-05-29 15:49:48.100 +03:00 [INF] TruckLoadingViewModel initialized with enhanced save functionality and debugging capabilities
2025-05-29 15:49:48.122 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:48.122 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:48.359 +03:00 [INF] TruckLoadingView loaded, initializing ViewModel with save functionality
2025-05-29 15:49:48.360 +03:00 [INF] Initializing TruckLoadingViewModel with enhanced save capabilities
2025-05-29 15:49:48.360 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:48.918 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:48.926 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:48.937 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:48.980 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-29 15:49:49.125 +03:00 [ERR] Error retrieving truck loads for date "2025-05-29T00:00:00.0000000+03:00"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
2025-05-29 15:49:49.268 +03:00 [ERR] Error retrieving today's truck loads
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 253
2025-05-29 15:49:49.271 +03:00 [ERR] Error ecd22786 in GetTodaysTruckLoadsAsync: InvalidOperationException - A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 253
2025-05-29 15:49:49.377 +03:00 [ERR] Error loading today's truck loads
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 253
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 259
   at PoultrySlaughterPOS.ViewModels.TruckLoadingViewModel.LoadTodaysTruckLoadsAsync() in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TruckLoadingViewModel.cs:line 410
2025-05-29 15:49:49.482 +03:00 [ERR] Error loading truck loading data after 1121ms
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 253
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 259
   at PoultrySlaughterPOS.ViewModels.TruckLoadingViewModel.LoadTodaysTruckLoadsAsync() in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TruckLoadingViewModel.cs:line 410
   at PoultrySlaughterPOS.ViewModels.TruckLoadingViewModel.LoadDataAsync() in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TruckLoadingViewModel.cs:line 134
2025-05-29 15:49:49.485 +03:00 [ERR] Error 800f89f2 in LoadDataAsync: InvalidOperationException - A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.TruckLoadRepository.GetTruckLoadsByDateAsync(DateTime loadDate, CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\TruckLoadRepository.cs:line 46
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 253
   at PoultrySlaughterPOS.Services.TruckLoadingService.GetTodaysTruckLoadsAsync(CancellationToken cancellationToken) in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\TruckLoadingService.cs:line 259
   at PoultrySlaughterPOS.ViewModels.TruckLoadingViewModel.LoadTodaysTruckLoadsAsync() in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TruckLoadingViewModel.cs:line 410
   at PoultrySlaughterPOS.ViewModels.TruckLoadingViewModel.LoadDataAsync() in C:\Users\$\Desktop\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TruckLoadingViewModel.cs:line 134
2025-05-29 15:49:49.489 +03:00 [WRN] Error message displayed: فشل في تحميل البيانات. يرجى المحاولة مرة أخرى.
2025-05-29 15:49:49.493 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:49.493 +03:00 [INF] TruckLoadingView initialization completed successfully in 1133ms
2025-05-29 15:49:49.493 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:49.656 +03:00 [INF] Truck loading data loaded successfully in 1121ms
2025-05-29 15:49:49.656 +03:00 [INF] TruckLoadingViewModel initialized successfully
2025-05-29 15:49:49.656 +03:00 [INF] Truck loading page loaded successfully
2025-05-29 15:49:49.656 +03:00 [INF] Successfully navigated to page: TruckLoading
2025-05-29 15:49:56.844 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:57.075 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:57.078 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:57.087 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:57.169 +03:00 [INF] Truck loading data loaded successfully in 325ms
2025-05-29 15:49:58.790 +03:00 [INF] Retrieving available trucks for loading
2025-05-29 15:49:59.041 +03:00 [INF] Found 0 available trucks for loading
2025-05-29 15:49:59.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:59.046 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__nextDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='60']
SELECT [t].[LoadId], [t].[CagesCount], [t].[CreatedDate], [t].[LoadDate], [t].[Notes], [t].[Status], [t].[TotalWeight], [t].[TruckId], [t].[UpdatedDate], [t0].[TruckId], [t0].[CreatedDate], [t0].[DriverName], [t0].[IsActive], [t0].[TruckNumber], [t0].[UpdatedDate]
FROM [TRUCK_LOADS] AS [t]
INNER JOIN [TRUCKS] AS [t0] ON [t].[TruckId] = [t0].[TruckId]
WHERE [t].[LoadDate] >= @__targetDate_0 AND [t].[LoadDate] < @__nextDate_1
ORDER BY [t].[TruckId], [t].[LoadDate]
2025-05-29 15:49:59.143 +03:00 [INF] Truck loading data loaded successfully in 353ms
2025-05-29 15:50:06.235 +03:00 [INF] MainWindow closing, performing cleanup
2025-05-29 15:50:06.235 +03:00 [INF] MainWindow cleanup completed
2025-05-29 15:50:06.292 +03:00 [INF] Shutting down Poultry Slaughter POS application...
2025-05-29 15:50:06.298 +03:00 [INF] Application is shutting down...
2025-05-29 15:50:06.326 +03:00 [INF] Application host stopped successfully
2025-05-29 15:50:06.327 +03:00 [INF] Poultry Slaughter POS application shutdown completed
